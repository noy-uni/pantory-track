{% extends "base.html" %}

{% block title %}{{ title }} - å–«èŒ¶åº—ç®¡ç†{% endblock %}

{% block content %}

<div class="p-chat-message">
  <div class="p-chat-message__icon">
    <img src="{{ url_for('static', filename='icons/chat-icon.png') }}" alt="ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼">
  </div>
  <div class="p-chat-message__bubble">
    <h1 class="text-2xl font-bold text-amber-900">{{ title }}</h1>
  </div>
</div>

<p class="sub-title text-center text-xl text-amber-700 mb-4">å•†å“ã‚’é¸ã‚“ã§ãã ã•ã„</p>

<!-- ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠï¼š2åˆ—ã‚°ãƒªãƒƒãƒ‰ -->
<div class="card-container grid grid-cols-2 gap-4 w-full">
  {% for product in products %}
  <a href="{{ url_for('entry_quantity', mode=mode, product_id=product['id']) }}" 
     class="product-card product-card--medium
            {% if product['current_stock'] <= 0 %}
                stock-zero
            {% elif product['reorder_level'] is not none and product['current_stock'] <= product['reorder_level'] %}
                stock-low
            {% endif %}">

    <!-- ç”»åƒ -->
    <div class="product-card__icon product-card__icon--medium">
      {% if product['image_path'] %}
        <img src="{{ url_for('static', filename='products/' + product['image_path']) }}" 
             alt="{{ product['name'] }}" 
             class="product-card__img">
      {% else %}
        <span class="product-card__emoji">
          {% if mode == 'arrival' %}âœ¨{% elif mode == 'waste' %}ğŸ¥€{% else %}â˜•{% endif %}
        </span>
      {% endif %}
    </div>

    <!-- å•†å“æƒ…å ± -->
    <div class="product-info space-y-2">
      <!-- å•†å“å + origin -->
      <div class="product-name-wrapper">
        <div class="product-name font-bold text-base leading-tight">{{ product['name'] }}</div>
        {% if product['origin'] %}
          <div class="product-origin text-xs text-gray-600">{{ product['origin'] }}</div>
        {% endif %}
      </div>
      
      <!-- åœ¨åº«æ•° -->
      <div class="badge text-xs">
        {{ product['current_stock'] }} {{ product['unit'] }}
        {% if product['current_stock'] <= 0 %}
          <br><small class="text-rose-600">(åœ¨åº«ãªã—)</small>
        {% endif %}
      </div>
    </div>
  </a>
  {% endfor %}
</div>

<div class="c-footer-nav w-full flex flex-col gap-4 mt-10">
  <a href="{{ url_for('index') }}" class="btn-footer-sub">
    ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹
  </a>
</div>

{% endblock %}