{% extends "base.html" %}

{% block title %}商品編集 - 喫茶店在庫管理{% endblock %}

{% block content %}
  <div class="w-full bg-white rounded-2xl shadow-md p-6 space-y-6">
    <h1 class="text-2xl font-bold">「{{ product['name'] }}」の修正</h1>

    <form action="{{ url_for('update_product', product_id=product['id']) }}" method="POST" class="space-y-4">
      <div>
        <label class="block font-semibold mb-1">商品名</label>
        <input type="text" name="name" value="{{ product['name'] }}" required
               class="mt-1 block w-full rounded-2xl border border-slate-300 px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-amber-500">
      </div>

      <div>
        <label class="block font-semibold mb-1">産地</label>
        <input type="text" name="origin" value="{{ product['origin'] }}"
               class="mt-1 block w-full rounded-2xl border border-slate-300 px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-amber-500">
      </div>

      <div>
        <label class="block font-semibold mb-1">カテゴリ</label>
        <select name="category_id"
                class="mt-1 block w-full rounded-2xl border border-slate-300 px-4 py-2 text-lg bg-white focus:outline-none focus:ring-2 focus:ring-amber-500">
          {% for c in categories %}
          <option value="{{ c['id'] }}" {{ 'selected' if c['id']==product['category_id'] else '' }}>
            {{ c['name'] }}
          </option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label class="block font-semibold mb-1">現在の在庫数</label>
        <input type="number" step="0.1" name="current_stock" value="{{ product['current_stock'] }}"
               class="mt-1 block w-full rounded-2xl border border-slate-300 px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-amber-500">
      </div>

      <div>
        <label class="block font-semibold mb-1">単位</label>
        <input type="text" name="unit" value="{{ product['unit'] }}"
               class="mt-1 block w-full rounded-2xl border border-slate-300 px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-amber-500">
      </div>

      <div>
        <label class="block font-semibold mb-1">補充の目安</label>
        <input type="number" step="0.1" name="reorder_level" value="{{ product['reorder_level'] }}"
               class="mt-1 block w-full rounded-2xl border border-slate-300 px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-amber-500">
      </div>

      <button type="submit"
              class="btn-update mt-4 w-full rounded-2xl bg-emerald-600 text-white font-bold py-3 text-lg shadow-md active:translate-y-0.5 active:shadow-none transition">
        内容を更新する
      </button>
    </form>

    <form action="{{ url_for('delete_product', product_id=product['id']) }}" method="POST"
          onsubmit="return confirm('本当に削除（非表示）にしますか？');" class="pt-4 border-t border-slate-200">
      <button type="submit"
              class="btn-delete mt-4 w-full rounded-2xl bg-rose-600 text-white font-bold py-3 text-base shadow-md active:translate-y-0.5 active:shadow-none transition">
        この商品を削除する
      </button>
    </form>

    <div class="c-footer-nav w-full flex flex-col gap-4 mt-6">
      <a href="{{ url_for('index') }}"
         class="c-menu-btn c-menu-btn--sub flex items-center justify-center gap-3 w-full py-3 text-lg font-bold rounded-2xl bg-slate-100 text-slate-900 shadow-sm active:translate-y-1 active:shadow-none transition">
        トップページに戻る
      </a>
    </div>
  </div>
{% endblock %}