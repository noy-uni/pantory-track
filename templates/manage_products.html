{% extends "base.html" %}

{% block title %}商品管理 - 喫茶店管理{% endblock %}

{% block content %}
    <h1>✏️ 商品情報の管理</h1>
    
    <div style="text-align: right; margin-bottom: 15px;">
        <a href="{{ url_for('add_product') }}" style="text-decoration: none;">＋ 新しい商品を登録する</a>
    </div>

    <table>
        <thead>
            <tr>
                <th>商品情報</th>
                <th>在庫 / 発注点</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for p in products %}
            <tr>
                <td>
                    <span class="badge">{{ p['category_name'] or '未設定' }}</span><br>
                    <strong>{{ p['name'] }}</strong>
                    {% if p['origin'] %}<br><small>({{ p['origin'] }})</small>{% endif %}
                </td>
                <td>
                    在庫: {{ p['current_stock'] }}{{ p['unit'] }}<br>
                    <small>発注点: {{ p['reorder_level'] }}</small>
                </td>
                <td>
                    <div style="display: flex; gap: 10px;">
                        <a href="{{ url_for('edit_product', product_id=p['id']) }}" class="btn-edit">直す</a>
                        
                        <form action="{{ url_for('delete_product', product_id=p['id']) }}" method="POST" onsubmit="return confirm('本当に削除（非表示に）してもよろしいかしら？');">
                            <button type="submit" class="btn-delete">消す</button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="c-footer-nav">
      <a href="{{ url_for('admin_menu') }}" class="c-menu-btn c-menu-btn--sub">
        管理メニューに戻る
      </a>
    </div>
{% endblock %}