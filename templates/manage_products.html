{% extends "base.html" %}

{% block title %}å•†å“ç®¡ç† - å–«èŒ¶åº—åœ¨åº«ç®¡ç†{% endblock %}

{% block content %}

<!-- ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ« -->
<div class="p-chat-message">
  <div class="p-chat-message__icon">
    <img src="{{ url_for('static', filename='icons/chat-icon.png') }}" alt="ã‚·ã‚§ãƒ•">
  </div>
  <div class="p-chat-message__bubble">
    <h1 class="text-2xl font-bold text-amber-900">å•†å“ã®ç®¡ç†ã‚’ã—ã¾ã—ã‚‡ã†</h1>
  </div>
</div>
<!-- æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³ -->
<div class="w-full mb-6">
  <a href="{{ url_for('add_product') }}" class="btn-success">
    ï¼‹ æ–°ã—ã„å•†å“ã‚’ç™»éŒ²ã™ã‚‹
  </a>
</div>

<!-- å•†å“ãƒ†ãƒ¼ãƒ–ãƒ«ã‚«ãƒ¼ãƒ‰ -->
<div class="input-card w-full overflow-hidden">
  <table class="w-full text-sm">
    <thead>
      <tr class="bg-amber-50 border-b-2 border-amber-200">
        <th class="text-left px-4 py-3 font-bold text-amber-900">
          å•†å“æƒ…å ±
        </th>
        <th class="text-left px-4 py-3 font-bold text-amber-900">
          åœ¨åº« / ç™ºæ³¨ç‚¹
        </th>
        <th class="text-left px-4 py-3 font-bold text-amber-900">
          æ“ä½œ
        </th>
      </tr>
    </thead>
    <tbody>
      {% for p in products %}
      <tr class="border-b border-slate-200 last:border-0 hover:bg-amber-50 transition">
        <!-- å•†å“æƒ…å ± -->
        <td class="px-4 py-4 align-top">
          <span class="badge">
            {{ p['category_name'] or 'æœªåˆ†é¡' }}
          </span>
          <div class="mt-2">
            <strong class="text-base text-slate-900">{{ p['name'] }}</strong>
            {% if p['origin'] %}
            <br>
            <small class="text-slate-500">(ç”£åœ°: {{ p['origin'] }})</small>
            {% endif %}
          </div>
        </td>

        <!-- åœ¨åº«/ç™ºæ³¨ç‚¹ -->
        <td class="px-4 py-4 align-top">
          <div class="text-base font-semibold text-slate-900">
            åœ¨åº«: {{ p['current_stock'] }} {{ p['unit'] }}
          </div>
          <div class="text-sm text-slate-500 mt-1">
            ç™ºæ³¨ç‚¹: {{ p['reorder_level'] }} {{ p['unit'] }}
          </div>
        </td>

        <!-- æ“ä½œãƒœã‚¿ãƒ³ -->
        <td class="px-4 py-4 align-top">
          <div class="flex flex-col gap-2">
            <!-- ç·¨é›†ãƒœã‚¿ãƒ³ -->
            <a href="{{ url_for('edit_product', product_id=p['id']) }}"
               class="btn-edit">
              âœï¸ ç·¨é›†ã™ã‚‹
            </a>
            
            <!-- å‰Šé™¤ãƒœã‚¿ãƒ³ -->
            <form action="{{ url_for('delete_product', product_id=p['id']) }}" 
                  method="POST" 
                  onsubmit="return confirm('{{ p['name'] }} ã‚’å‰Šé™¤ï¼ˆéè¡¨ç¤ºã«ï¼‰ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ');">
              <button type="submit" class="btn-delete w-full">
                ğŸ—‘ï¸ å‰Šé™¤ã™ã‚‹
              </button>
            </form>
          </div>
        </td>
      </tr>
      {% else %}
      <!-- å•†å“ãŒãªã„å ´åˆ -->
      <tr>
        <td colspan="3" class="px-4 py-8 text-center text-slate-500">
          ğŸ“­ ã¾ã å•†å“ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- ãƒ•ãƒƒã‚¿ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
<div class="c-footer-nav w-full flex flex-col gap-4 mt-10">
  <a href="{{ url_for('admin_menu') }}" class="btn-footer-sub">
    ç®¡ç†ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹
  </a>
</div>

{% endblock %}