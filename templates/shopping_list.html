{% extends "base.html" %}

{% block title %}ãŠè²·ã„ç‰©ãƒªã‚¹ãƒˆ - å–«èŒ¶åº—åœ¨åº«ç®¡ç†{% endblock %}

{% block body_class %}p-shopping{% endblock %}

{% block content %}
  <h1 class="p-shopping__title">ğŸ›’ ãŠè²·ã„ç‰©ãƒªã‚¹ãƒˆ</h1>
  <p class="p-shopping__lead">ä»¥ä¸‹ã®å•†å“ã®åœ¨åº«ãŒå°‘ãªããªã£ã¦ã„ã¾ã™ã€‚</p>

  {% if items %}
  <div class="p-shopping__list">
    {% for item in items %}
    <div class="c-item-card" id="card-{{ item['id'] }}">
      <label class="c-item-card__row">
        <input type="checkbox" class="c-item-card__checkbox" data-id="{{ item['id'] }}" data-name="{{ item['name'] }}"
          data-unit="{{ item['unit'] }}" onclick="toggleItem(this)">

        <div class="c-item-card__content" id="content-{{ item['id'] }}">
          <div class="c-item-card__name">{{ item['name'] }}</div>
          <div class="c-item-card__stock-info">
            ã‚ã¨ {{ item['current_stock'] }}{{ item['unit'] }} ã—ã‹ã‚ã‚Šã¾ã›ã‚“
          </div>
        </div>
      </label>
    </div>
    {% endfor %}
  </div>

  <div id="arrival-section" class="c-arrival-section">
    <form action="{{ url_for('execute_bulk_arrival') }}" method="POST" id="arrival-form">
      <div id="arrival-list-container" class="c-arrival-section__list-container" style="display: none;">
        <h2 class="c-arrival-section__title">âœ¨ å…¥åº«ã™ã‚‹å†…å®¹ã®ç¢ºèª</h2>
        <div id="arrival-container">
          </div>
      </div>
  
      <button type="button" id="confirm-toggle-btn" class="c-menu-btn c-menu-btn--arrival">
        ã¾ã¨ã‚ã¦å…¥åº«ã‚’ç¢ºèªã™ã‚‹
      </button>
  
      <button type="submit" id="submit-btn" class="c-menu-btn c-menu-btn--arrival" style="display: none;">
        ã“ã®å†…å®¹ã§å…¥åº«ã‚’ç¢ºå®šï¼
      </button>
    </form>
  </div>
  
  {% else %}
  <div class="c-alert"
    style="background: var(--color-sub-btn); border-color: var(--color-sub-btn-dark); text-align: center; padding: var(--size-48);">
    <p style="font-size: var(--size-64); margin: 0;">â˜•</p>
    <p class="c-alert__title" style="margin-top: var(--size-16);">ä»Šã™ãè²·ã†å¿…è¦ãŒã‚ã‚‹ã‚‚ã®ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
  </div>
  {% endif %}

  <div class="c-footer-nav">
    <a href="{{ url_for('index') }}" class="c-menu-btn c-menu-btn--sub">
      ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹
    </a>
  </div>
  
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/shopping_list.js') }}"></script>
{% endblock %}