{% extends "base.html" %}

{% block title %}ãŠè²·ã„ç‰©ãƒªã‚¹ãƒˆ - ã™ãªã°Cafe åœ¨åº«ç®¡ç†{% endblock %}

{% block header_title %}ğŸ›’ ãŠè²·ã„ç‰©ãƒªã‚¹ãƒˆ{% endblock %}

{% block content %}
  <div class="content-wrapper">
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold text-slate-800 mb-3">ãŠè²·ã„ç‰©ãƒ¡ãƒ¢</h1>
    </div>

    <div class="p-chat-message">
      <div class="p-chat-message__icon">
        <img src="{{ url_for('static', filename='icons/chat-icon.png') }}" alt="ã‚·ã‚§ãƒ•">
      </div>
      <div class="p-chat-message__bubble">
        <h1 class="text-xl font-bold text-amber-900">ãŠè²·ã„ç‰©ã—ãŸã‚‰ãƒã‚§ãƒƒã‚¯ã‚’ã„ã‚Œã¦ãã ã•ã„ã€‚</h1>
      </div>
    </div>

    {% if items %}
    <!-- å•†å“ãƒªã‚¹ãƒˆ -->
    <div class="space-y-4 mb-8">
      {% for item in items %}
      <div class="card p-4" id="card-{{ item['id'] }}">
        <label class="flex items-center gap-4 cursor-pointer">
          <input type="checkbox"
            class="shopping-checkbox"
            data-id="{{ item['id'] }}" 
            data-name="{{ item['name'] }}"
            data-unit="{{ item['unit'] }}" 
            onchange="toggleItem(this)">

          <div class="flex-1">
            <div class="text-xl font-bold text-slate-800">{{ item['name'] }}</div>
            <div class="text-sm text-rose-700 mt-1 font-medium">
              ã‚ã¨ {{ item['current_stock'] }}{{ item['unit'] }} ã—ã‹ã‚ã‚Šã¾ã›ã‚“
            </div>
          </div>
        </label>
      </div>
      {% endfor %}
    </div>

    <!-- å…¥åº«ç¢ºèªã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div id="arrival-section" class="hidden">
      <form action="{{ url_for('execute_bulk_arrival') }}" method="POST" id="arrival-form">
        
        <!-- ç¢ºèªãƒœã‚¿ãƒ³ï¼ˆæœ€åˆã ã‘è¡¨ç¤ºï¼‰ -->
        <button type="button" id="confirm-toggle-btn"
                class="btn-success">
          ã“ã®ã¾ã¾å…¥åº«ç™»éŒ²ã™ã‚‹
        </button>

        <!-- å…¥åº«ãƒªã‚¹ãƒˆï¼ˆç¢ºèªå¾Œã«è¡¨ç¤ºï¼‰ -->
        <div id="arrival-list-container" class="hidden arrival-list-card">
          <h2 class="text-2xl font-bold text-center mb-6 text-slate-800">
            ã„ãã¤å…¥åº«ã—ã¾ã™ã‹ï¼Ÿ
          </h2>
          <div id="arrival-container" class="space-y-4">
            <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
          </div>
        </div>
    
        <!-- ç¢ºå®šãƒœã‚¿ãƒ³ï¼ˆç¢ºèªå¾Œã«è¡¨ç¤ºï¼‰ -->
        <button type="submit" id="submit-btn"
                class="btn-success hidden">
          ã“ã®å†…å®¹ã§å…¥åº«ã‚’ç¢ºå®šã™ã‚‹
        </button>
      </form>
    </div>
    
    {% else %}
    <!-- å•†å“ãŒãªã„å ´åˆ -->
    <div class="bg-slate-100 border-4 border-slate-300 text-center px-8 py-10 rounded-2xl">
      <p class="text-5xl mb-4">â˜•</p>
      <p class="text-2xl font-bold text-slate-800">ä»Šã™ãè²·ã†å¿…è¦ãŒã‚ã‚‹ã‚‚ã®ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
    </div>
    {% endif %}

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <div class="mt-8">
      <a href="{{ url_for('index') }}" class="btn-footer-sub">
        ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹
      </a>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/shopping_list.js') }}"></script>
{% endblock %}