ï½–{% extends "base.html" %}

{% block title %}åœ¨åº«ä¸€è¦§ - å–«èŒ¶åº—åœ¨åº«ç®¡ç†{% endblock %}

{% block content %}

<!-- ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ« -->
<div class="p-chef-message flex items-end justify-center gap-4 mb-6">
  <div class="p-chef-message__icon">
    <span class="text-5xl">ğŸ“¦</span>
  </div>
  <div class="p-chef-message__bubble relative bg-white border-4 border-amber-900 rounded-2xl px-5 py-3 shadow-md">
    <h1 class="text-3xl font-bold text-amber-900">åœ¨åº«ä¸€è¦§</h1>
  </div>
</div>

<!-- åœ¨åº«ä¸€è¦§ã‚«ãƒ¼ãƒ‰ -->
<div class="w-full space-y-4">
  {% for p in products %}
  {% set is_out = p['current_stock'] <= 0 %}
  {% set is_low = p['current_stock'] > 0 and p['current_stock'] <= p['reorder_level'] %}
  
  <!-- å•†å“ã‚«ãƒ¼ãƒ‰ -->
  <div class="input-card {% if is_out %}bg-rose-50 border-rose-300{% elif is_low %}bg-amber-50 border-amber-300{% endif %}">
    <div class="flex gap-4">
      
      <!-- å•†å“ç”»åƒ -->
      <div class="w-24 h-24 rounded-2xl overflow-hidden flex-shrink-0 bg-slate-100 border-2 border-slate-200">
        {% if p['image_path'] %}
          <img src="{{ url_for('static', filename=p['image_path']) }}" 
               alt="{{ p['name'] }}" 
               class="w-full h-full object-cover">
        {% else %}
          <div class="w-full h-full flex items-center justify-center text-4xl">
            {% if 'ã‚³ãƒ¼ãƒ’ãƒ¼' in p['name'] %}â˜•
            {% elif 'ç‰›ä¹³' in p['name'] or 'ãƒŸãƒ«ã‚¯' in p['name'] %}ğŸ¥›
            {% elif 'ã‚¯ãƒªãƒ¼ãƒ ' in p['name'] %}ğŸ¶
            {% elif 'ç ‚ç³–' in p['name'] %}ğŸ§‚
            {% elif 'è±†' in p['name'] %}ğŸ«˜
            {% elif 'ãƒãƒ§ã‚³' in p['name'] %}ğŸ«
            {% elif 'èŒ¶' in p['name'] %}ğŸµ
            {% else %}ğŸ“¦
            {% endif %}
          </div>
        {% endif %}
      </div>

      <!-- å•†å“æƒ…å ± -->
      <div class="flex-1">
        <!-- å•†å“å + ç”£åœ° -->
        <div class="mb-3">
          <h3 class="text-xl font-bold text-slate-900">
            {{ p['name'] }}
          </h3>
          {% if p['origin'] %}
          <p class="text-sm text-slate-500 mt-1">
            ç”£åœ°: {{ p['origin'] }}
          </p>
          {% endif %}
        </div>

        <!-- åœ¨åº«æ•° + ã‚¢ãƒ©ãƒ¼ãƒˆ -->
        <div class="flex items-baseline gap-3">
          <div>
            <span class="text-3xl font-bold text-slate-900">
              {{ p['current_stock'] }}
            </span>
            <span class="text-lg text-slate-600 ml-1">
              {{ p['unit'] }}
            </span>
          </div>

          {% if is_out %}
          <div class="flex items-center gap-1 text-rose-700 font-bold">
            <span class="text-xl">ğŸš«</span>
            <span class="text-sm">åœ¨åº«åˆ‡ã‚Œã§ã™ï¼</span>
          </div>
          {% elif is_low %}
          <div class="flex items-center gap-1 text-amber-700 font-bold">
            <span class="text-xl">âš ï¸</span>
            <span class="text-sm">è£œå……ãŒå¿…è¦ã§ã™</span>
          </div>
          {% else %}
          <div class="flex items-center gap-1 text-green-700 font-semibold">
            <span class="text-xl">âœ…</span>
            <span class="text-sm">åœ¨åº«ã‚ã‚Š</span>
          </div>
          {% endif %}
        </div>

        <!-- ç™ºæ³¨ç‚¹ã®æƒ…å ± -->
        <p class="text-sm text-slate-500 mt-2">
          ç™ºæ³¨ç‚¹: {{ p['reorder_level'] }} {{ p['unit'] }}
        </p>
      </div>
    </div>
  </div>

  {% else %}
  <!-- å•†å“ãŒãªã„å ´åˆ -->
  <div class="input-card text-center py-8">
    <div class="text-5xl mb-4">ğŸ“­</div>
    <p class="text-lg text-slate-500">ã¾ã å•†å“ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
  </div>
  {% endfor %}
</div>

<!-- æ³¨æ„æ›¸ã -->
<div class="bg-blue-50 border-2 border-blue-200 rounded-2xl px-5 py-4 mt-6">
  <p class="text-sm text-blue-900">
    ğŸ’¡ <strong>å…¥åº«ãƒ»å‡ºåº«ä½œæ¥­</strong>ã‚’ã™ã‚‹å ´åˆã¯ã€ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã‹ã‚‰å„ãƒœã‚¿ãƒ³ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚
  </p>
</div>

<!-- ãƒ•ãƒƒã‚¿ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
<div class="c-footer-nav w-full flex flex-col gap-4 mt-10">
  <a href="{{ url_for('index') }}" class="btn-footer-sub">
    ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹
  </a>
</div>

{% endblock %}