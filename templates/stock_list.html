{% extends "base.html" %}

{% block title %}åœ¨åº«ä¸€è¦§ - å–«èŒ¶åº—åœ¨åº«ç®¡ç†{% endblock %}

{% block body_class %}p-stock{% endblock %}

{% block content %}
    <h1 class="text-2xl font-bold mb-4">ğŸ“¦ ç¾åœ¨ã®åœ¨åº«çŠ¶æ³</h1>

    <table class="w-full mt-2 border-collapse bg-white rounded-2xl overflow-hidden shadow-sm text-base">
        <thead>
            <tr>
                <th class="bg-slate-100 text-left text-sm font-semibold text-slate-700 border-b border-slate-200 px-4 py-2">
                    å•†å“å
                </th>
                <th class="bg-slate-100 text-left text-sm font-semibold text-slate-700 border-b border-slate-200 px-4 py-2">
                    ç¾åœ¨ã®åœ¨åº«
                </th>
            </tr>
        </thead>
        <tbody>
            {% for p in products %}
            {% set is_out = p['current_stock'] <= 0 %}
            {% set is_low = p['current_stock'] <= p['reorder_level'] %}
            <tr class="border-b last:border-0 {{ 'bg-red-50' if is_out else ('bg-amber-50' if is_low else 'bg-white') }}">
                <td class="px-4 py-3 align-top">
                    <strong class="text-base">{{ p['name'] }}</strong>
                    {% if p['origin'] %}<br><small class="text-slate-500">({{ p['origin'] }})</small>{% endif %}
                    <br>
                    <a href="{{ url_for('edit_product', product_id=p['id']) }}"
                       class="edit-link inline-block mt-2 text-sm text-amber-700 underline">
                        æƒ…å ±ã‚’ç›´ã™
                    </a>
                </td>
                <td class="px-4 py-3 align-top">
                    <span class="text-xl font-bold">{{ p['current_stock'] }}</span> {{ p['unit'] }}
                    {% if is_out %}
                        <span class="alert-text ml-2 text-sm text-red-700 font-semibold">ğŸš« åœ¨åº«åˆ‡ã‚Œã§ã™ã‚ï¼</span>
                    {% elif is_low %}
                        <span class="alert-text ml-2 text-sm text-amber-700 font-semibold">âš ï¸ è²·ã„å‡ºã—ãŒå¿…è¦ã§ã™</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="c-footer-nav w-full flex flex-col gap-4 mt-8">
      <a href="{{ url_for('index') }}"
         class="c-menu-btn c-menu-btn--sub flex items-center justify-center gap-3 w-full py-4 text-xl font-bold rounded-2xl bg-slate-100 text-slate-900 shadow-sm active:translate-y-1 active:shadow-none transition">
        ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹
      </a>
    </div>
    <p class="mt-8 text-sm text-slate-500">
        â€»ä½œæ¥­ï¼ˆå…¥åº«ã‚„å‡ºåº«ï¼‰ã‚’ã™ã‚‹å ´åˆã¯ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢ã‹ã‚‰å„ãƒœã‚¿ãƒ³ã‚’é¸ã‚“ã§ãã ã•ã„ã­ã€‚
    </p>
{% endblock %}